### 20.05.2023

- Посмотреть видео:
  **<https://www.youtube.com/watch?v=j2-GqaeSueA>**
  **<https://habr.com/ru/articles/439434/>**

! DONE

- Преобразовать получение параметров на апишке is-user-exist в интерфейс через @Param(): params: InterfaceName

! DONE

- Прочитать о class-transformer и class-validator, сделат проверку что userId в апишке is-user-exist является числом через декоратор

! DONE

- Реализовать логин пользователя и завести JWT в проект используя @nestjs/passport или @nestjs/jwt
  **<https://docs.nestjs.com/security/authentication>**
- Создать модуль изображений и реализовать все существующие роуты

### 24.05.2023

!DONE

- Глобальные модули и отличие их от обычных в NestJS

!DONE

- В AuthGuard сделать получение ID юзера с токена, затем через этот ID с БД получить юзера и закинуть информацию о юзере в request.user (+ пространство имён).

!DONE

- Написать свой декоратор User() user: UserEntity используя в документацию <https://docs.nestjs.com/custom-decorators> при этом информацию брать с request.user.

!DONE

- Метод /save на изображении дописать используя декоратор @User().

!DONE

- Добавить поле nickname для юзеров и по умолчанию для всех ранее зарегистрированных установить это поле значением "No nickname".

!DONE

- Респонсы и DTO. Создать пагинационную апишку которая будет возвращать изображения для всех пользователей, вместе с изображением должен возвращаться пользователь который загрузил это изображение в проперте "user", для экономии данных в поле user должны быть только id и nickname (использовать не select в ORM), а Response.

- Создание и написание своих собственных модулей на NestJS, разница между .forRoot/.forRootAsync/.forFeature (поверхностно).

### 29.05.2023

!DONE

- Сделать возможность пользователю загружать аватарки, в процессе загрузки используя sharp <https://www.npmjs.com/package/sharp> уменьшить её в размере до 128 пикселей и находится по адресу в хранилище /storage/{:userId}/avatar.jpg. Все остальные изображения которые грузит ползователь должны размещаться в папке /storage/{:userId}/images/{imageName.extention}.

!DONE

- Реализовать Throttle на запросы используя <https://docs.nestjs.com/security/rate-limiting> на 100 запросов в минуту.

!DONE

- Прочитать про вебсокеты и их применение в реальной жизни <https://socket.io>.

!DONE

- Сделать апишку регистрации юзеров которая будет отправлять случайно сгенерированный числовой код подтверждения (6 цифр) на почту в процессе регистрации (соотвественно добавить уникальное поле email в таблицу users). Для хранение временныз данных кодов которые были отправлены использовать Redis <https://www.npmjs.com/package/@liaoliaots/nestjs-redis> (ключ - email, значение - сгенерированный код). Для отправки писем использовать любой аккаунт Google Mail и прописать SMTP конфигурацию к нему (вынеся предварительно в ENV файл) используя модуль для NestJS <https://nest-modules.github.io/mailer/docs/mailer>.

- Посмотреть примеры использования <https://nextjs.org> и <https://mui.com> который будем применять для написания клиента.

### 02.07.2023

!DONE

- Докинуть @ApiProperty() и @ApiOperation() для всех DTO, что бы список апишек и их параметров отображался корректно при переходе на <http://localhost:3000/api>.

- Добавить к EnvConfig все имеющиеся ENV переменные.

- Добавить к аватаркам ограничение на загрузку в 10MB с помощью пайпа и поинт на удаление аватарки.

- Добавить сообщения к выброшеным ошибкам по всему проекту.

- Решить проблему с данными после регистрации (никнейм, возраст и прочее).

- Поместить сервер и все необходимые для работы базы в Docker, а так же создать команду в npm для запуска в контейнере.

- Превьюшки изображений выгружаемых пользователем в разных качествах для экономии трафика (3 уровня разрешения с сохранением пропорций).

- Очередь обработки изображений с помощью Bull (<https://www.npmjs.com/package/@nestjs/bull>).

- Почитать <https://docs.nestjs.com/techniques/compression>.
